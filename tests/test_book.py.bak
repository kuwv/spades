# -*- coding: utf-8 -*-
# type: ignore
# copyright: (c) 2020 by Jesse Johnson.
# license: Apache 2.0, see LICENSE for more details.
'''Test book.'''

import pytest

from spades import exceptions
from spades.models.card import Card
from spades.models.book import Book


def test_book():
    '''Test card in book.'''
    book = Book()
    book.add_trick(0, Card('K', 'S'))
    assert Card('K', 'S') in book


def test_book_trump():
    '''Test high card in book.'''
    book = Book()
    book.add_trick(1, Card('2', 'D'))
    book.add_trick(2, Card('10', 'D'))
    assert book.trump == Card('10', 'D')


def test_book_max():
    '''Test maximum allowed cards in book.'''
    book = Book(1)
    with pytest.raises(exceptions.MaxBookSizeException):
        book.add_trick(3, Card('2', 'H'))
        book.add_trick(0, Card('3', 'H'))
